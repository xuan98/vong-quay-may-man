<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VÃ²ng Quay May Máº¯n</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: #f0f8ff;
    }
    canvas {
      border: 5px solid #ff9800;
      border-radius: 50%;
    }
    button {
      margin-top: 20px;
      font-size: 24px;
      padding: 10px 30px;
      background: #ff5722;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¯ VÃ²ng Quay May Máº¯n ðŸŽ¯</h1>
  <canvas id="wheel" width="500" height="500"></canvas>
  <button onclick="spinWheel()">QUAY!</button>

  <script>
    const names = [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9",
      "10",
      "11",
      "12",
      "13",
      "14",
      "15",
      "16",
      "17",
      "18",
      "19",
      "20",
      "21",
      "22",
      "23",
      "24",
      "25",
      "26",
      "27",
      "28",
      "29",
      "30",
      "31",
      "32",
      "33",
      "34",
      "35",
      "36",
      "37",
      "38",
      "39",
      "40",
      "41",
      "42",
      "43"
    ];

    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");
    const numSegments = names.length;
    const angle = (2 * Math.PI) / numSegments;
    let currentAngle = 0;

    function drawWheel() {
      for (let i = 0; i < numSegments; i++) {
        ctx.beginPath();
        ctx.fillStyle = i % 2 === 0 ? "#ffeb3b" : "#03a9f4";
        ctx.moveTo(250, 250);
        ctx.arc(250, 250, 240, currentAngle, currentAngle + angle);
        ctx.lineTo(250, 250);
        ctx.fill();

        ctx.save();
        ctx.translate(250, 250);
        ctx.rotate(currentAngle + angle / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#000";
        ctx.font = "18px Arial";
        ctx.fillText(names[i], 230, 10);
        ctx.restore();

        currentAngle += angle;
      }
    }

    let spinning = false;
    let spinAngle = 0;
    let spinSpeed = 0;

    function spinWheel() {
      if (spinning) return;
      spinning = true;
      spinAngle = 0;
      spinSpeed = Math.random() * 0.2 + 0.25;
      animateSpin();
    }

    function animateSpin() {
      ctx.clearRect(0, 0, 500, 500);
      ctx.save();
      ctx.translate(250, 250);
      ctx.rotate(spinAngle);
      ctx.translate(-250, -250);
      currentAngle = 0;
      drawWheel();
      ctx.restore();

      spinSpeed *= 0.98;
      spinAngle += spinSpeed;

      if (spinSpeed < 0.002) {
        spinning = false;
        announceWinner();
        return;
      }
      requestAnimationFrame(animateSpin);
    }

    function announceWinner() {
      const index = Math.floor((numSegments - (spinAngle % (2 * Math.PI)) / angle) % numSegments);
      alert("ðŸŽ‰ NgÆ°á»i trÃºng thÆ°á»Ÿng: " + names[index]);
    }

    drawWheel();
  </script>
</body>
</html>
